@using SasquatchCAIRS.Models
@model IEnumerable<SasquatchCAIRS.Request>

@{
    ViewBag.Title = "Results";
}

<h2>Results</h2>

<div class="btn-group float-right">
    @LinkExtensions.ActionLink(Html, "Modify Search", "Modify", new {
    controller = "Search"
}, new {
    @class = "btn btn-info"
})
    @LinkExtensions.ActionLink(Html, "New Search", "Advanced", new {
    controller = "Search"
}, new {
    @class = "btn btn-info"
})
</div>

For keywords: @ViewBag.keywords

<div>
</div>
@if (@ViewBag.ResultSetSize < 1) {
    <h3>No results were found</h3>
} else {

    <fieldset class="results">
        <legend>Search Results</legend>
        <div>
            <table class="table table-bordered table-hover">
                <tr>
                    <th>
                        @Html.DisplayName(Constants.UIString.FieldLabel.REQUEST_ID)
                    </th>
                    <th>
                        @Html.DisplayName(Constants.UIString.FieldLabel.CALLER_NAME)
                    </th>
                    <th>
                        @Html.DisplayName(Constants.UIString.FieldLabel.PATIENT_NAME)
                    </th>
                    <th>
                        @Html.DisplayName(Constants.UIString.FieldLabel.STATUS)
                    </th>
                    <th>
                        @Html.DisplayName(Constants.UIString.FieldLabel.KEYWORDS)
                    </th>
                    <th>
                        @Html.DisplayName(Constants.UIString.FieldLabel.START_TIME)
                    </th>
                    <th>
                        @Html.DisplayName(Constants.UIString.FieldLabel.COMPLETED_TIME)
                    </th>
                </tr>


                @foreach (var request in Model) {
                    <tr>
                        <th>
                            @Html.DisplayFor(modelItem => request.RequestID)
                        </th>
                        <th> 
                            @Html.DisplayFor(modelItem => request.RequestorFName) 
                            @Html.DisplayFor(modelItem => request.RequestorLName)
                        </th>
                        <th>
                            @Html.DisplayFor(modelItem => request.PatientFName) 
                            @Html.DisplayFor(modelItem => request.PatientLName)
                        </th>
                        <th>
                            @Enum.GetName(typeof(Constants.RequestStatus), @request.RequestStatus)
                        </th>
                        <th>
                            @foreach(string keyword in ViewBag.keywordDict[@request.RequestID])
                            { <span>@keyword </span> }
                        </th>
                        <th>
                            @Html.DisplayFor(modelItem => request.TimeOpened)
                        </th>
                        <th>
                            @Html.DisplayFor(modelItem => request.TimeClosed)
                        </th>
                    </tr>
}
            </table>
        </div>
    </fieldset>
}
